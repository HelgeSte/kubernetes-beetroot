apiVersion: v1
kind: Namespace
metadata:
  name: test
---
apiVersion: v1
data:
  DB_Host: bXlzcWw=
  DB_Password: cGFzd3Jk
  DB_User: cm9vdA==
kind: Secret
metadata:
  namespace: test
  name: app-secret
# kubectl get secrets
# kubectl get secret app-secret -o yaml # get the secret values
# kubectl describe secrets
---
apiVersion: v1
kind: Pod
metadata:
  labels:
    run: secret-pod
  name: secret-pod
  namespace: test
spec:
  containers:
  - name: secret-pod
    #image: nginx
    # nginx works but mysql pod fails
    image: mysql:8.0
    name: secret-pod
    ports:
      - containerPort: 8080
    env:
    - name: MYSQL_ROOT_PASSWORD
      valueFrom:
        secretKeyRef:
          name: app-secret
          key: DB_Password
    - name: MYSQL_DATABASE
      value: wordpress
    - name: MYSQL_USER
      value: wordpress
    - name: MYSQL_PASSWORD
      valueFrom:
        secretKeyRef:
          name: app-secret
          key: DB_Password
    #envFrom:
    #- secretRef:
    #    name: app-secret
---
